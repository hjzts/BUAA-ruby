import{d as C,r as m,o as S,b as p,e as t,f as l,g as v,h as a,i,y as E}from"./index-B0vVrGoP.js";import{u as V}from"./user-Dae_coUz.js";const j=C({__name:"ProfileEdit",setup(F){const c=m(null),_=m(null),o=m({username:"",phone_number:"",address:"",bio:"这是我的个性签名~這是我的個性簽名~~"}),h=m({username:"",phone_number:"",address:"",bio:"这是我的个性签名~這是我的個性簽名"});S(async()=>{try{const r=await V.getProfile(),{username:e,phone_number:u,address:s,bio:d}=r;o.value={username:e,phone_number:u,address:s,bio:d},console.log("form: ",o.value),h.value={username:e,phone_number:u,address:s,bio:d}}catch(r){console.error("Failed to load profile:",r)}});async function x(){try{const r={username:o.value.username,phone_number:o.value.phone_number,address:o.value.address,avatar:c.value};await V.updateProfile(r)}catch(r){console.error("Failed to update profile:",r)}}return(r,e)=>{const u=l("v-card-title"),s=l("v-img"),d=l("v-icon"),y=l("v-avatar"),U=l("v-file-input"),f=l("v-text-field"),b=l("v-textarea"),w=l("v-btn"),g=l("v-form"),P=l("v-card-text"),k=l("v-card"),z=l("v-col"),A=l("v-row"),B=l("v-container");return v(),p(B,null,{default:t(()=>[a(A,{justify:"center"},{default:t(()=>[a(z,{cols:"12",sm:"8",md:"6"},{default:t(()=>[a(k,null,{default:t(()=>[a(u,null,{default:t(()=>e[5]||(e[5]=[i("Edit Profile")])),_:1}),a(P,null,{default:t(()=>[a(g,{onSubmit:E(x,["prevent"])},{default:t(()=>[a(y,{size:"100",class:"mb-3"},{default:t(()=>[_.value?(v(),p(s,{key:0,src:_.value,alt:"Avatar"},null,8,["src"])):(v(),p(d,{key:1,size:"80"},{default:t(()=>e[6]||(e[6]=[i("mdi-account-circle")])),_:1}))]),_:1}),a(U,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),label:"Avatar",accept:"image/*","show-size":!0,"prepend-icon":"mdi-camera"},null,8,["modelValue"]),a(f,{modelValue:o.value.username,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.username=n),label:"Username",required:"",placeholder:o.value.username,clearable:""},null,8,["modelValue","placeholder"]),a(f,{modelValue:o.value.phone_number,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.phone_number=n),label:"Phone",rules:[n=>!n||/^\d{10,11}$/.test(n)||"Invalid phone number"],placeholder:o.value.phone_number},null,8,["modelValue","rules","placeholder"]),a(b,{modelValue:o.value.address,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.address=n),label:"Address",placeholder:o.value.address},null,8,["modelValue","placeholder"]),a(b,{modelValue:o.value.bio,"onUpdate:modelValue":e[4]||(e[4]=n=>o.value.bio=n),label:"Bio",placeholder:o.value.bio},null,8,["modelValue","placeholder"]),a(w,{type:"submit",color:"primary",block:""},{default:t(()=>e[7]||(e[7]=[i(" Update Profile ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{j as default};
