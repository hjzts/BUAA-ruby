import{d as defineComponent,r as ref,c as computed,o as onMounted,b as createBlock,e as withCtx,k as createElementBlock,h as createVNode,B as useRoute,f as resolveComponent,g as openBlock,j as createBaseVNode,t as toDisplayString,n as createCommentVNode,F as Fragment,l as renderList,i as createTextVNode,q as mergeProps}from"./index-IlJQo5zm.js";import{p as productService}from"./product-bq5Yz51G.js";import{c as cartService}from"./cart-fc6PdwP4.js";import{f as favoriteService}from"./favorite-C93Na5JZ.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./api-Cql6jV87.js";const _hoisted_1={class:"text-h4 mb-2"},_hoisted_2={class:"text-subtitle-1 mb-4 text-grey-darken-1"},_hoisted_3={class:"d-flex align-center mb-6"},_hoisted_4={class:"text-h4 font-weight-bold text-primary"},_hoisted_5={key:0,class:"text-body-1 ml-2 text-decoration-line-through"},_hoisted_6={key:0,class:"mb-6"},_hoisted_7={class:"d-flex flex-wrap gap-2"},_hoisted_8={key:1,class:"mb-6"},_hoisted_9={class:"d-flex flex-wrap gap-2"},_hoisted_10={key:0,class:"ml-1"},_hoisted_11={key:2,class:"mb-6"},_hoisted_12={class:"mb-6"},_hoisted_13={class:"d-flex align-center"},_hoisted_14={class:"mx-4 text-h6"},_hoisted_15={class:"ml-4 text-caption text-grey"},_hoisted_16={class:"text-body-1"},_hoisted_17={key:1,class:"d-flex justify-center align-center",style:{height:"400px"}},_sfc_main=defineComponent({__name:"ProductDetail",setup(__props){const route=useRoute(),product=ref(null),quantity=ref(1),selectedColor=ref(null),selectedSize=ref(null),selectedDesign=ref(null),isFavorited=ref(!1),addingToCart=ref(!1),togglingFavorite=ref(!1),activeTab=ref("details"),snackbar=ref({show:!1,color:"success",text:""}),calculateTotalPrice=computed((()=>{var _a,_b,_c,_d;let price=eval(null==(_a=product.value)?void 0:_a.price)||0;return(null==(_b=selectedColor.value)?void 0:_b.price_adjustment)&&(price+=eval(selectedColor.value.price_adjustment)),(null==(_c=selectedSize.value)?void 0:_c.price_adjustment)&&(price+=eval(selectedSize.value.price_adjustment)),(null==(_d=selectedDesign.value)?void 0:_d.price_adjustment)&&(price+=eval(selectedDesign.value.price_adjustment)),(price*quantity.value).toFixed(2)})),hasAdjustments=computed((()=>{var e,t,a;return!!((null==(e=selectedColor.value)?void 0:e.price_adjustment)||(null==(t=selectedSize.value)?void 0:t.price_adjustment)||(null==(a=selectedDesign.value)?void 0:a.price_adjustment))})),maxQuantity=computed((()=>{var e;return selectedSize.value?selectedSize.value.stock_quantity:(null==(e=product.value)?void 0:e.stock_quantity)||0})),canAddToCart=computed((()=>{var e;return(null==(e=product.value)?void 0:e.in_stock)&&quantity.value<=maxQuantity.value&&quantity.value>0})),selectColor=e=>{selectedColor.value=e},selectSize=e=>{selectedSize.value=e,quantity.value=1},addToCart=async()=>{if(product.value){addingToCart.value=!0;try{await cartService.addToCart(product.value.id,quantity.value),snackbar.value={show:!0,color:"success",text:"Product added to cart successfully!"}}catch(e){snackbar.value={show:!0,color:"error",text:"Failed to add product to cart"}}finally{addingToCart.value=!1}}},toggleFavorite=async()=>{if(product.value){togglingFavorite.value=!0;try{isFavorited.value?await favoriteService.removeFavorite(product.value.id):await favoriteService.addFavorite(product.value.id),isFavorited.value=!isFavorited.value}catch(e){}finally{togglingFavorite.value=!1}}},fetchProduct=async()=>{try{const e=parseInt(route.params.id),t=await productService.getProduct(e);product.value=t.attributes,isFavorited.value=await favoriteService.checkFavorite(e)}catch(e){}},designOptions=computed((()=>product.value.product_designs.map((e=>({id:e.id,title:e.design.design_number,price_adjustment:e.price_adjustment,design:e.design})))));return onMounted((()=>{fetchProduct()})),(e,t)=>{const a=resolveComponent("v-progress-circular"),o=resolveComponent("v-row"),l=resolveComponent("v-img"),r=resolveComponent("v-card"),i=resolveComponent("v-col"),d=resolveComponent("v-alert"),s=resolveComponent("v-icon"),c=resolveComponent("v-btn"),n=resolveComponent("v-tooltip"),u=resolveComponent("v-select"),v=resolveComponent("v-card-actions"),p=resolveComponent("v-tab"),m=resolveComponent("v-tabs"),_=resolveComponent("v-window-item"),h=resolveComponent("v-window"),g=resolveComponent("v-snackbar"),x=resolveComponent("v-container");return product.value?(openBlock(),createBlock(x,{key:0},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createVNode(i,{cols:"12",md:"6"},{default:withCtx((()=>[createVNode(r,{class:"px-4 py-6"},{default:withCtx((()=>[createVNode(l,{src:product.value.image_url||"/placeholder.png",height:"400",cover:"",class:"bg-grey-lighten-2 rounded"},{placeholder:withCtx((()=>[createVNode(o,{class:"fill-height ma-0",align:"center",justify:"center"},{default:withCtx((()=>[createVNode(a,{indeterminate:"",color:"primary"})])),_:1})])),_:1},8,["src"])])),_:1})])),_:1}),createVNode(i,{cols:"12",md:"6"},{default:withCtx((()=>[createVNode(r,{class:"pa-6"},{default:withCtx((()=>{var e,a,o;return[createBaseVNode("h1",_hoisted_1,toDisplayString(product.value.product_name),1),createBaseVNode("p",_hoisted_2,toDisplayString(product.value.description),1),createBaseVNode("div",_hoisted_3,[createBaseVNode("span",_hoisted_4," $"+toDisplayString(calculateTotalPrice.value),1),hasAdjustments.value?(openBlock(),createElementBlock("span",_hoisted_5," $"+toDisplayString(product.value.price),1)):createCommentVNode("",!0)]),createVNode(d,{type:product.value.stock_quantity>0?"success":"warning",text:product.value.stock_quantity>0?"In Stock":"Out of Stock",class:"mb-4",density:"compact",variant:"tonal"},null,8,["type","text"]),(null==(e=product.value.product_colors)?void 0:e.length)?(openBlock(),createElementBlock("div",_hoisted_6,[t[8]||(t[8]=createBaseVNode("h3",{class:"text-h6 mb-3"},"Color",-1)),createBaseVNode("div",_hoisted_7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(product.value.product_colors,(e=>(openBlock(),createBlock(n,{key:e.id,text:e.color.description,location:"top"},{activator:withCtx((({props:a})=>{var o;return[createVNode(c,mergeProps({ref_for:!0},a,{style:{backgroundColor:e.color.rgb},variant:(null==(o=selectedColor.value)?void 0:o.id)===e.id?"elevated":"outlined",class:"color-btn",width:"40",height:"40",onClick:t=>selectColor(e)}),{default:withCtx((()=>{var a;return[(null==(a=selectedColor.value)?void 0:a.id)===e.id?(openBlock(),createBlock(s,{key:0,color:"white",size:"small"},{default:withCtx((()=>t[7]||(t[7]=[createTextVNode(" mdi-check ")]))),_:1})):createCommentVNode("",!0)]})),_:2},1040,["style","variant","onClick"])]})),_:2},1032,["text"])))),128))])])):createCommentVNode("",!0),(null==(a=product.value.product_sizes)?void 0:a.length)?(openBlock(),createElementBlock("div",_hoisted_8,[t[9]||(t[9]=createBaseVNode("h3",{class:"text-h6 mb-3"},"Size",-1)),createBaseVNode("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(product.value.product_sizes,(e=>{var t;return openBlock(),createBlock(c,{key:e.id,variant:(null==(t=selectedSize.value)?void 0:t.id)===e.id?"elevated":"outlined",disabled:0===e.stock_quantity,onClick:t=>selectSize(e)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.size.size_name)+" ",1),e.price_adjustment?(openBlock(),createElementBlock("small",_hoisted_10," (+$"+toDisplayString(e.price_adjustment)+") ",1)):createCommentVNode("",!0)])),_:2},1032,["variant","disabled","onClick"])})),128))])])):createCommentVNode("",!0),(null==(o=product.value.product_designs)?void 0:o.length)?(openBlock(),createElementBlock("div",_hoisted_11,[t[10]||(t[10]=createBaseVNode("h3",{class:"text-h6 mb-3"},"Design",-1)),createVNode(u,{modelValue:selectedDesign.value,"onUpdate:modelValue":t[0]||(t[0]=e=>selectedDesign.value=e),items:designOptions.value,"item-title":"title","item-value":"id",label:"Select Design",variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12,[t[11]||(t[11]=createBaseVNode("h3",{class:"text-h6 mb-3"},"Quantity",-1)),createBaseVNode("div",_hoisted_13,[createVNode(c,{icon:"mdi-minus",variant:"outlined",disabled:quantity.value<=1,onClick:t[1]||(t[1]=e=>quantity.value--)},null,8,["disabled"]),createBaseVNode("span",_hoisted_14,toDisplayString(quantity.value),1),createVNode(c,{icon:"mdi-plus",variant:"outlined",disabled:quantity.value>=maxQuantity.value,onClick:t[2]||(t[2]=e=>quantity.value++)},null,8,["disabled"]),createBaseVNode("span",_hoisted_15,toDisplayString(maxQuantity.value)+" available ",1)])]),createVNode(v,{class:"pa-0"},{default:withCtx((()=>[createVNode(c,{color:"primary",size:"large",block:"",loading:addingToCart.value.value,disabled:!canAddToCart.value,class:"mb-2",onClick:addToCart},{default:withCtx((()=>t[12]||(t[12]=[createTextVNode(" Add to Cart ")]))),_:1},8,["loading","disabled"])])),_:1}),createVNode(v,{class:"ps-0"},{default:withCtx((()=>[createVNode(c,{color:isFavorited.value?"error":void 0,variant:isFavorited.value?"flat":"outlined",size:"large",block:"",loading:toggleFavorite.value,onClick:toggleFavorite},{default:withCtx((()=>[createVNode(s,{icon:isFavorited.value?"mdi-heart":"mdi-heart-outline",class:"mr-2"},null,8,["icon"]),createTextVNode(" "+toDisplayString(isFavorited.value?"Remove from Favorites":"Add to Favorites"),1)])),_:1},8,["color","variant","loading"])])),_:1})]})),_:1}),createVNode(r,{class:"mt-4 pa-6"},{default:withCtx((()=>[createVNode(m,{modelValue:activeTab.value,"onUpdate:modelValue":t[3]||(t[3]=e=>activeTab.value=e)},{default:withCtx((()=>[createVNode(p,{value:"details"},{default:withCtx((()=>t[13]||(t[13]=[createTextVNode("Details")]))),_:1}),createVNode(p,{value:"shipping"},{default:withCtx((()=>t[14]||(t[14]=[createTextVNode("Shipping")]))),_:1}),createVNode(p,{value:"returns"},{default:withCtx((()=>t[15]||(t[15]=[createTextVNode("Returns")]))),_:1})])),_:1},8,["modelValue"]),createVNode(h,{modelValue:activeTab.value,"onUpdate:modelValue":t[4]||(t[4]=e=>activeTab.value=e),class:"mt-4"},{default:withCtx((()=>[createVNode(_,{value:"details"},{default:withCtx((()=>[createBaseVNode("div",_hoisted_16,toDisplayString(product.value.description),1)])),_:1}),createVNode(_,{value:"shipping"},{default:withCtx((()=>t[16]||(t[16]=[createBaseVNode("div",{class:"text-body-1"},[createBaseVNode("h4",{class:"text-h6 mb-2"},"Shipping Information"),createBaseVNode("ul",{class:"pl-4"},[createBaseVNode("li",null,"Free shipping on orders over $50"),createBaseVNode("li",null,"Standard delivery: 3-5 business days"),createBaseVNode("li",null,"Express delivery: 1-2 business days")])],-1)]))),_:1}),createVNode(_,{value:"returns"},{default:withCtx((()=>t[17]||(t[17]=[createBaseVNode("div",{class:"text-body-1"},[createBaseVNode("h4",{class:"text-h6 mb-2"},"Return Policy"),createBaseVNode("p",null,"30-day return policy for unworn items in original packaging.")],-1)]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),createVNode(g,{modelValue:snackbar.value.show,"onUpdate:modelValue":t[6]||(t[6]=e=>snackbar.value.show=e),color:snackbar.value.color,timeout:3e3},{actions:withCtx((()=>[createVNode(c,{color:"white",variant:"text",onClick:t[5]||(t[5]=e=>snackbar.value.show=!1)},{default:withCtx((()=>t[18]||(t[18]=[createTextVNode(" Close ")]))),_:1})])),default:withCtx((()=>[createTextVNode(toDisplayString(snackbar.value.text)+" ",1)])),_:1},8,["modelValue","color"])])),_:1})):(openBlock(),createElementBlock("div",_hoisted_17,[createVNode(a,{indeterminate:"",color:"primary"})]))}}}),ProductDetail=_export_sfc(_sfc_main,[["__scopeId","data-v-e4c6b87d"]]);export{ProductDetail as default};
