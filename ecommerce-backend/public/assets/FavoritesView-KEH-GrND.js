import{d as e,r as a,o as t,b as l,e as r,u as o,f as s,g as i,h as d,j as c,i as u,k as n,l as v,F as f,t as p,q as m}from"./index-RCYdGSFb.js";import{f as _}from"./favorite-Q9RRu10k.js";import{c as h}from"./cart-Ct7A41YY.js";import{f as y}from"./format--kbnhsCA.js";import{_ as g}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./api-CfODcUyk.js";const b={class:"d-flex align-center mb-6"},k={class:"favorite-time"},x={class:"d-flex align-center"},w={class:"text-primary text-h6"},C={key:1,class:"d-flex justify-center align-center",style:{"min-height":"400px"}},j=g(e({__name:"FavoritesView",setup(e){const g=o(),j=a(!1),A=a(!1),V=a([]),S=a(!1),z=a(null),F=async()=>{j.value=!0;try{const e=await _.getFavorites();V.value=e.data.map((e=>({...e,showAddedSnackbar:!1})))}catch(e){}finally{j.value=!1}},M=async()=>{if(z.value){A.value=!0;try{await _.removeFavorite(z.value.id),V.value=V.value.filter((e=>{var a;return e.id!==(null==(a=z.value)?void 0:a.id)})),S.value=!1}catch(e){}finally{A.value=!1}}};return t((()=>{F()})),(e,a)=>{const t=s("v-icon"),o=s("v-spacer"),_=s("v-btn"),R=s("v-col"),U=s("v-row"),I=s("v-progress-circular"),$=s("v-chip"),q=s("v-img"),B=s("v-card-title"),D=s("v-card-subtitle"),E=s("v-card-item"),H=s("v-card-text"),L=s("v-divider"),O=s("v-card-actions"),P=s("v-snackbar"),T=s("v-card"),Y=s("v-hover"),G=s("v-dialog"),J=s("v-container");return i(),l(J,null,{default:r((()=>[d(U,null,{default:r((()=>[d(R,{cols:"12"},{default:r((()=>[c("div",b,[d(t,{icon:"mdi-heart",color:"error",size:"x-large",class:"me-3"}),a[3]||(a[3]=c("h1",{class:"text-h4 mb-0"},"我的收藏",-1)),d(o),d(_,{"prepend-icon":"mdi-refresh",onClick:F,loading:j.value},{default:r((()=>a[2]||(a[2]=[u(" Refresh ")]))),_:1},8,["loading"])])])),_:1})])),_:1}),j.value?(i(),n("div",C,[d(I,{indeterminate:"",size:"64",color:"primary"})])):(i(),l(U,{key:0},{default:r((()=>[V.value.length?(i(!0),n(f,{key:0},v(V.value,(e=>(i(),l(R,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:r((()=>[d(Y,null,{default:r((({isHovering:t,props:l})=>[d(T,m({ref_for:!0},l,{elevation:t?8:2,class:["h-100 favorite-card",{"on-hover":t}]}),{default:r((()=>[d(q,{src:e.attributes.product.image_url||"/placeholder.png","aspect-ratio":1,cover:"",class:"bg-grey-lighten-2",onClick:a=>{return t=e.attributes.product.id,void g.push(`/products/${t}`);var t}},{placeholder:r((()=>[d(U,{class:"fill-height ma-0",align:"center",justify:"center"},{default:r((()=>[d(I,{indeterminate:"",color:"grey-lighten-5"})])),_:1})])),default:r((()=>[c("div",k,[d($,{size:"small",color:"white",variant:"flat"},{default:r((()=>{return[u(" Added "+p((a=e.attributes.added_at,y(new Date(a),"MMM d, yyyy"))),1)];var a})),_:2},1024)])])),_:2},1032,["src","onClick"]),d(E,null,{default:r((()=>[d(B,{class:"text-subtitle-1 mb-1"},{default:r((()=>[u(p(e.attributes.product.product_name),1)])),_:2},1024),d(D,null,{default:r((()=>[c("div",x,[c("span",w,"$"+p(e.attributes.product.price),1),d(o),d($,{color:e.attributes.product.in_stock?"success":"error",size:"small"},{default:r((()=>[u(p(e.attributes.product.in_stock?"In Stock":"Out of Stock"),1)])),_:2},1032,["color"])])])),_:2},1024)])),_:2},1024),d(H,{class:"text-truncate"},{default:r((()=>[u(p(e.attributes.product.description),1)])),_:2},1024),d(L),d(O,null,{default:r((()=>[d(_,{variant:"text",color:"primary","prepend-icon":"mdi-cart",disabled:!e.attributes.product.in_stock,onClick:a=>(async e=>{try{await h.addToCart(e.id,1);const a=V.value.find((a=>a.product.id===e.id));a&&(a.showAddedSnackbar=!0)}catch(a){}})(e.attributes.product)},{default:r((()=>a[4]||(a[4]=[u(" Add to Cart ")]))),_:2},1032,["disabled","onClick"]),d(o),d(_,{variant:"text",color:"error",icon:"mdi-heart-off",onClick:a=>(e=>{z.value=e,S.value=!0})(e)},null,8,["onClick"])])),_:2},1024),d(P,{modelValue:e.showAddedSnackbar,"onUpdate:modelValue":a=>e.showAddedSnackbar=a,timeout:2e3,color:"success",location:"top"},{default:r((()=>a[5]||(a[5]=[u(" Added to cart successfully! ")]))),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1040,["elevation","class"])])),_:2},1024)])),_:2},1024)))),128)):(i(),l(R,{key:1,cols:"12"},{default:r((()=>[d(T,{class:"text-center pa-12"},{default:r((()=>[d(t,{icon:"mdi-heart-outline",size:"100",color:"grey-lighten-1",class:"mb-4"}),a[7]||(a[7]=c("h3",{class:"text-h5 mb-2"},"Your Favorites List is Empty",-1)),a[8]||(a[8]=c("p",{class:"text-body-1 mb-6"},"Start exploring our products and save your favorites!",-1)),d(_,{color:"primary",size:"large",to:"/products","prepend-icon":"mdi-shopping"},{default:r((()=>a[6]||(a[6]=[u(" Browse Products ")]))),_:1})])),_:1})])),_:1}))])),_:1})),d(G,{modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),"max-width":"400"},{default:r((()=>[d(T,null,{default:r((()=>[d(B,{class:"text-h5"},{default:r((()=>a[9]||(a[9]=[u(" Remove from Favorites? ")]))),_:1}),d(H,null,{default:r((()=>{var e;return[a[10]||(a[10]=u(" Are you sure you want to remove ")),c("strong",null,p(null==(e=z.value)?void 0:e.product.product_name),1),a[11]||(a[11]=u(" from your favorites? "))]})),_:1}),d(O,null,{default:r((()=>[d(o),d(_,{color:"grey-darken-1",variant:"text",onClick:a[0]||(a[0]=e=>S.value=!1)},{default:r((()=>a[12]||(a[12]=[u(" Cancel ")]))),_:1}),d(_,{color:"error",variant:"text",loading:A.value,onClick:M},{default:r((()=>a[13]||(a[13]=[u(" Remove ")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-bded1f16"]]);export{j as default};
