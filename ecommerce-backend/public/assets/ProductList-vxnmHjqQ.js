import{a as e,d as l,r as a,c as s,w as t,o as i,b as d,e as o,u as c,f as u,g as r,h as n,i as v,t as p,j as g,k as m,l as _,F as f,m as y,n as h,p as z,q as w,s as C}from"./index-RCYdGSFb.js";import{d as k,p as $}from"./product-CxGzDVNC.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const S={getAllColors:async()=>(await e.get("/api/v1/colors")).data,createColor:async l=>(await e.post("/api/v1/colors",l)).data,updateColor:async(l,a)=>(await e.put(`/api/v1/colors/${l}`,a)).data,async deleteColor(l){await e.delete(`/api/v1/colors/${l}`)},getProductColors:async l=>(await e.get(`/api/v1/products/${l}/colors`)).data,addProductColor:async(l,a)=>(await e.post(`/api/v1/products/${l}/colors`,a)).data,updateProductColor:async(l,a,s)=>(await e.put(`/api/v1/products/${l}/colors/${a}`,s)).data,async deleteProductColor(l,a){await e.delete(`/api/v1/products/${l}/colors/${a}`)}},b={getAllSizes:async()=>(await e.get("/api/v1/sizes")).data,createSize:async l=>(await e.post("/api/v1/sizes",l)).data,updateSize:async(l,a)=>(await e.put(`/api/v1/sizes/${l}`,a)).data,async deleteSize(l){await e.delete(`/api/v1/sizes/${l}`)},getProductSizes:async l=>(await e.get(`/api/v1/products/${l}/sizes`)).data,addProductSize:async(l,a)=>(await e.post(`/api/v1/products/${l}/sizes`,a)).data,updateProductSize:async(l,a,s)=>(await e.put(`/api/v1/products/${l}/sizes/${a}`,s)).data,async deleteProductSize(l,a){await e.delete(`/api/v1/products/${l}/sizes/${a}`)}},D={getAllDesigns:async()=>(await e.get("/api/v1/designs")).data,createDesign:async l=>(await e.post("/api/v1/designs",l)).data,updateDesign:async(l,a)=>(await e.put(`/api/v1/designs/${l}`,a)).data,async deleteDesign(l){await e.delete(`/api/v1/designs/${l}`)},getProductDesigns:async l=>(await e.get(`/api/v1/products/${l}/designs`)).data,addProductDesign:async(l,a)=>(await e.post(`/api/v1/products/${l}/designs`,a)).data,updateProductDesign:async(l,a,s)=>(await e.put(`/api/v1/products/${l}/designs/${a}`,s)).data,async deleteProductDesign(l,a){await e.delete(`/api/v1/products/${l}/designs/${a}`)}},P={class:"d-flex flex-wrap gap-2 mt-2"},V={class:"d-flex flex-wrap gap-2 mt-2"},R={class:"d-flex align-center"},A={class:"text-h6"},j={class:"color-dots"},U={key:0,class:"more-colors"},N={key:1,class:"color-dot default-color"},O={class:"text-truncate"},F={class:"mt-2"},q={key:1,class:"d-flex justify-center align-center",style:{height:"400px"}},H=x(l({__name:"ProductList",setup(e){const l=c(),x=a(!1),H=a("grid"),I=a(!1),L=a([]),B=a([]),E=a([]),G=a([]),J=a(1),K=a(0),M=a({search:"",priceRange:[0,1e3],selectedColors:[],selectedSizes:[],selectedDesigns:[]}),Q=s((()=>({search:M.value.search,min_price:M.value.priceRange[0],max_price:M.value.priceRange[1],color_ids:M.value.selectedColors.length>0?M.value.selectedColors:void 0,size_ids:M.value.selectedSizes.length>0?M.value.selectedSizes:void 0,design_ids:M.value.selectedDesigns.length>0?M.value.selectedDesigns:void 0}))),T=async()=>{I.value=!0;try{const e=await $.getProducts({page:J.value,...Q.value});L.value=e.products.map((e=>({id:Number(e.id),...e.attributes}))),K.value=e.meta.total_pages}catch(e){}finally{I.value=!1}},W=k((()=>{J.value=1,T()}),300);t([()=>M.value.priceRange,()=>M.value.selectedColors,()=>M.value.selectedSizes,()=>M.value.selectedDesigns],(()=>{J.value=1,T()}),{deep:!0}),i((()=>{T(),(async()=>{try{const[e,l,a]=await Promise.all([S.getAllColors(),b.getAllSizes(),D.getAllDesigns()]);B.value=e,E.value=l,G.value=a}catch(e){}})()}));const X=e=>{var l;return(null==(l=null==e?void 0:e.color)?void 0:l.rgb)??"#CCCCCC"},Y=e=>{var l;return(null==(l=null==e?void 0:e.size)?void 0:l.size_name)??"N/A"};return(e,a)=>{const s=u("v-list-subheader"),t=u("v-list-item-title"),i=u("v-range-slider"),c=u("v-list-item"),k=u("v-chip"),$=u("v-select"),S=u("v-list"),b=u("v-navigation-drawer"),D=u("v-app-bar-nav-icon"),Q=u("v-toolbar-title"),Z=u("v-spacer"),ee=u("v-text-field"),le=u("v-btn"),ae=u("v-btn-group"),se=u("v-app-bar"),te=u("v-col"),ie=u("v-img"),de=u("v-card-title"),oe=u("v-card-subtitle"),ce=u("v-card-text"),ue=u("v-card-actions"),re=u("v-card"),ne=u("v-hover"),ve=u("v-alert"),pe=u("v-row"),ge=u("v-progress-circular"),me=u("v-pagination"),_e=u("v-container");return r(),d(_e,{fluid:""},{default:o((()=>[n(b,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=e=>x.value=e),location:"left",temporary:"",width:"300"},{default:o((()=>[n(S,null,{default:o((()=>[n(s,null,{default:o((()=>a[8]||(a[8]=[v("Filters")]))),_:1}),n(c,null,{default:o((()=>[n(t,null,{default:o((()=>a[9]||(a[9]=[v("Price Range")]))),_:1}),n(i,{modelValue:M.value.priceRange,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value.priceRange=e),max:1e3,step:10,class:"mt-4"},{prepend:o((()=>[v(" $"+p(M.value.priceRange[0]),1)])),append:o((()=>[v(" $"+p(M.value.priceRange[1]),1)])),_:1},8,["modelValue"])])),_:1}),n(c,null,{default:o((()=>[n(t,null,{default:o((()=>a[10]||(a[10]=[v("Colors")]))),_:1}),g("div",P,[(r(!0),m(f,null,_(B.value,(e=>(r(),d(k,{key:e.id,color:e.rgb,text:e.description,class:z({selected:M.value.selectedColors.includes(e.id)}),onClick:l=>(e=>{const l=M.value.selectedColors.indexOf(e);-1===l?M.value.selectedColors.push(e):M.value.selectedColors.splice(l,1)})(e.id)},null,8,["color","text","class","onClick"])))),128))])])),_:1}),n(c,null,{default:o((()=>[n(t,null,{default:o((()=>a[11]||(a[11]=[v("Sizes")]))),_:1}),g("div",V,[(r(!0),m(f,null,_(E.value,(e=>(r(),d(k,{key:e.id,class:z({selected:M.value.selectedSizes.includes(e.id)}),onClick:l=>(e=>{const l=M.value.selectedSizes.indexOf(e);-1===l?M.value.selectedSizes.push(e):M.value.selectedSizes.splice(l,1)})(e.id)},{default:o((()=>[v(p(e.size_name),1)])),_:2},1032,["class","onClick"])))),128))])])),_:1}),n(c,null,{default:o((()=>[n(t,null,{default:o((()=>a[12]||(a[12]=[v("Designs")]))),_:1}),n($,{modelValue:M.value.selectedDesigns,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value.selectedDesigns=e),items:G.value,"item-title":"design_number","item-value":"id",multiple:"",chips:""},null,8,["modelValue","items"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),n(pe,null,{default:o((()=>[n(te,{cols:"12"},{default:o((()=>[n(se,{flat:""},{default:o((()=>[n(D,{onClick:a[3]||(a[3]=e=>x.value=!x.value)}),n(Q,null,{default:o((()=>a[13]||(a[13]=[v("Products")]))),_:1}),n(Z),n(ee,{modelValue:M.value.search,"onUpdate:modelValue":[a[4]||(a[4]=e=>M.value.search=e),y(W)],"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),n(ae,{class:"ml-4"},{default:o((()=>[n(le,{color:"grid"===H.value?"primary":"",icon:"mdi-grid",onClick:a[5]||(a[5]=e=>H.value="grid")},null,8,["color"]),n(le,{color:"list"===H.value?"primary":"",icon:"mdi-view-list",onClick:a[6]||(a[6]=e=>H.value="list")},null,8,["color"])])),_:1})])),_:1})])),_:1}),n(te,{cols:"12"},{default:o((()=>[I.value?(r(),m("div",q,[n(ge,{indeterminate:"",color:"primary"})])):(r(),d(pe,{key:0},{default:o((()=>[L.value.length?(r(!0),m(f,{key:0},_(L.value,(s=>(r(),d(te,{key:s.id,cols:"grid"===H.value?12:6,sm:"grid"===H.value?6:4,md:"grid"===H.value?4:3},{default:o((()=>[n(ne,null,{default:o((({isHovering:t,props:i})=>[n(re,w({ref_for:!0},i,{elevation:t?8:2,class:{"on-hover":t},onClick:e=>{return a=s.id,void l.push(`/products/${a}`);var a}}),{default:o((()=>[n(ie,{src:s.image_url||"/placeholder.png",height:"200",cover:"",class:"align-end"},{default:o((()=>[s.in_stock?h("",!0):(r(),d(k,{key:0,color:"error",class:"ma-2"},{default:o((()=>a[14]||(a[14]=[v(" Out of Stock ")]))),_:1}))])),_:2},1032,["src"]),n(de,null,{default:o((()=>[v(p(s.product_name),1)])),_:2},1024),n(oe,null,{default:o((()=>{var e;return[g("div",R,[g("span",A,"$"+p(s.price),1),n(Z),g("div",j,[(null==(e=null==s?void 0:s.product_colors)?void 0:e.length)?(r(),m(f,{key:0},[(r(!0),m(f,null,_(s.product_colors.slice(0,3),(e=>(r(),m("span",{key:null==e?void 0:e.id,class:"color-dot",style:C({backgroundColor:X(e)})},null,4)))),128)),s.product_colors.length>3?(r(),m("span",U," +"+p(s.product_colors.length-3),1)):h("",!0)],64)):(r(),m("span",N))])])]})),_:2},1024),n(ce,null,{default:o((()=>{var l;return[g("div",O,p(s.description),1),g("div",F,[(null==(l=null==s?void 0:s.product_sizes)?void 0:l.length)?(r(),m(f,{key:0},[(r(!0),m(f,null,_(s.product_sizes.slice(0,3),(l=>(r(),d(k,{key:(null==l?void 0:l.id)||e.index,size:"small",class:"mr-1"},{default:o((()=>[v(p(Y(l)),1)])),_:2},1024)))),128)),s.product_sizes.length>3?(r(),d(k,{key:0,size:"small",class:"mr-1",variant:"outlined"},{default:o((()=>[v(" +"+p(s.product_sizes.length-3),1)])),_:2},1024)):h("",!0)],64)):(r(),d(k,{key:1,size:"small",class:"mr-1",color:"grey-lighten-1"},{default:o((()=>a[15]||(a[15]=[v(" No size available ")]))),_:1}))])]})),_:2},1024),n(ue,null,{default:o((()=>[n(le,{color:"primary",variant:"text",block:"",disabled:!s.in_stock},{default:o((()=>a[16]||(a[16]=[v(" View Details ")]))),_:2},1032,["disabled"])])),_:2},1024)])),_:2},1040,["elevation","class","onClick"])])),_:2},1024)])),_:2},1032,["cols","sm","md"])))),128)):(r(),d(te,{key:1,cols:"12",class:"text-center"},{default:o((()=>[n(ve,{type:"info",text:"No products found"})])),_:1}))])),_:1})),K.value>1?(r(),d(pe,{key:2,justify:"center",class:"mt-4"},{default:o((()=>[n(me,{modelValue:J.value,"onUpdate:modelValue":[a[7]||(a[7]=e=>J.value=e),T],length:K.value},null,8,["modelValue","length"])])),_:1})):h("",!0)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-75ca75c9"]]);export{H as default};
